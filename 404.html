<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EduNova - Professional Learning Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <!-- Add to your existing HTML -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4361ee">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Modern Professional Design */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #2ec4b6;
            --accent: #ff9f1c;
            --danger: #e63946;
            --warning: #ffd166;
            --success: #06d6a0;
            --light: #f8f9fa;
            --dark: #1a1a2e;
            --gray: #6c757d;
            --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --hover-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }

        #app {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Professional Login Page */
        .login-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 0;
            padding: 40px 25px;
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .login-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        @media (min-width: 768px) {
            .login-container {
                border-radius: 24px;
                max-width: 480px;
                margin: 40px auto;
                min-height: auto;
                box-shadow: var(--card-shadow);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
        }

        .login-header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .logo-container {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 20px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--card-shadow);
        }

        .logo-container i {
            font-size: 36px;
            color: white;
        }

        .login-header h1 {
            color: var(--dark);
            font-size: 32px;
            margin-bottom: 8px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .login-header p {
            color: var(--gray);
            font-size: 16px;
            line-height: 1.6;
            max-width: 300px;
            margin: 0 auto;
        }

        /* Branch Selection */
        .branch-selection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
            background: var(--light);
            padding: 15px;
            border-radius: 15px;
        }

        .branch-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .branch-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--card-shadow);
        }

        .branch-card.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.05), rgba(46, 196, 182, 0.05));
            transform: translateY(-3px);
        }

        .branch-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .branch-card h3 {
            font-size: 16px;
            margin-bottom: 5px;
            color: var(--dark);
            font-weight: 600;
        }

        .branch-card p {
            font-size: 12px;
            color: var(--gray);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--dark);
            font-size: 15px;
        }

        .form-control {
            width: 100%;
            padding: 18px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
            background: white;
            color: var(--dark);
            font-weight: 500;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(67, 97, 238, 0.1);
        }

        .form-control::placeholder {
            color: #adb5bd;
            font-weight: 400;
        }

        /* Professional Button */
        .btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .btn:hover::after {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(67, 97, 238, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--gray), #5a6268);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #05c593);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #ffc043);
        }

        /* Toggle Switch */
        .toggle-switch {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            padding: 10px;
            background: var(--light);
            border-radius: 12px;
        }

        .toggle-btn {
            background: none;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--gray);
        }

        .toggle-btn.active {
            background: white;
            color: var(--primary);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        /* Dashboard Styles */
        .dashboard {
            background: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Professional Navbar */
        .navbar {
            background: white;
            padding: 18px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #f1f3f5;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .brand-logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .brand-text h1 {
            font-size: 20px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
        }

        .brand-text p {
            font-size: 11px;
            color: var(--gray);
            margin: 0;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: var(--light);
            border-radius: 50px;
            transition: all 0.3s;
        }

        .user-badge:hover {
            background: #f8f9fa;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            color: white;
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 14px;
            color: var(--dark);
        }

        .user-role {
            font-size: 12px;
            color: var(--gray);
        }

        /* Sidebar */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .sidebar-overlay.active {
            display: block;
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            width: 280px;
            background: white;
            z-index: 2001;
            transform: translateX(-100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding-top: 25px;
            overflow-y: auto;
            box-shadow: 5px 0 30px rgba(0, 0, 0, 0.08);
        }

        .sidebar.active {
            transform: translateX(0);
        }

        .sidebar-header {
            padding: 0 25px 25px;
            border-bottom: 1px solid #f1f3f5;
            margin-bottom: 20px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 24px;
            color: white;
            box-shadow: var(--card-shadow);
        }

        .profile-info h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark);
        }

        .profile-info p {
            font-size: 13px;
            color: var(--gray);
            margin-bottom: 3px;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0 20px;
        }

        .sidebar-menu li {
            margin-bottom: 8px;
        }

        .menu-btn {
            width: 100%;
            text-align: left;
            padding: 16px 20px;
            border: none;
            background: none;
            border-radius: 12px;
            font-size: 15px;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 500;
        }

        .menu-btn i {
            width: 20px;
            text-align: center;
            font-size: 18px;
        }

        .menu-btn:hover, .menu-btn.active {
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.08), rgba(46, 196, 182, 0.08));
            color: var(--primary);
            transform: translateX(5px);
        }

        /* Main Content */
        .main-content {
            padding: 25px;
            background: #f8fafc;
            flex: 1;
            overflow-y: auto;
        }

        .content-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #f1f3f5;
        }

        .content-header h2 {
            color: var(--dark);
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .content-header p {
            color: var(--gray);
            font-size: 16px;
            max-width: 600px;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary), var(--secondary));
        }

        .stat-card h3 {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 15px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
            line-height: 1;
        }

        /* Subject Cards */
        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
        }

        .subject-card {
            background: white;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: all 0.3s;
            border: 1px solid #f1f3f5;
        }

        .subject-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--hover-shadow);
        }

        .subject-header {
            padding: 25px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .subject-header::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }

        .subject-header h3 {
            font-size: 22px;
            margin-bottom: 10px;
            font-weight: 700;
            position: relative;
            z-index: 1;
        }

        .subject-header p {
            font-size: 14px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .subject-body {
            padding: 25px;
        }

        .progress-container {
            margin: 20px 0;
        }

        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: var(--gray);
            font-weight: 500;
        }

        /* Lesson Items */
        .lessons-list {
            list-style: none;
            margin: 25px 0;
        }

        .lesson-item {
            padding: 16px 20px;
            border-bottom: 1px solid #f1f3f5;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .lesson-item:hover {
            background: #f8f9fa;
            border-radius: 10px;
        }

        .lesson-item:last-child {
            border-bottom: none;
        }

        .lesson-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .lesson-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .lesson-details {
            flex: 1;
        }

        .lesson-title {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 4px;
        }

        .lesson-meta {
            font-size: 13px;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Status Badges */
        .status-badge {
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 12px;
            font-weight: 600;
            min-width: 100px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-completed {
            background: rgba(6, 214, 160, 0.1);
            color: var(--success);
            border: 1px solid rgba(6, 214, 160, 0.2);
        }

        .status-pending {
            background: rgba(255, 209, 102, 0.1);
            color: #e6a500;
            border: 1px solid rgba(255, 209, 102, 0.2);
        }

        .status-approved {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            border: 1px solid rgba(67, 97, 238, 0.2);
        }

        .status-pending-approval {
            background: rgba(255, 159, 28, 0.1);
            color: var(--accent);
            border: 1px solid rgba(255, 159, 28, 0.2);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 20px;
            animation: fadeIn 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .modal {
            background: white;
            border-radius: 24px;
            padding: 30px;
            width: 100%;
            max-width: 500px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #f1f3f5;
        }

        .modal-header h2 {
            color: var(--dark);
            font-size: 24px;
            font-weight: 700;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray);
            padding: 5px;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            background: #f8f9fa;
            color: var(--dark);
        }

        /* Admin Table */
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }

        .admin-table th {
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.05), rgba(46, 196, 182, 0.05));
            padding: 18px 20px;
            text-align: left;
            font-weight: 600;
            color: var(--dark);
            border-bottom: 2px solid #f1f3f5;
        }

        .admin-table td {
            padding: 18px 20px;
            border-bottom: 1px solid #f1f3f5;
            color: var(--dark);
        }

        .admin-table tr:last-child td {
            border-bottom: none;
        }

        .admin-table tr:hover {
            background: #f8fafc;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .action-btn.approve {
            background: rgba(6, 214, 160, 0.1);
            color: var(--success);
        }

        .action-btn.reject {
            background: rgba(230, 57, 70, 0.1);
            color: var(--danger);
        }

        .action-btn.edit {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark);
            color: white;
            padding: 18px 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 4000;
            display: none;
            max-width: 400px;
            width: 90%;
            text-align: center;
            font-weight: 500;
            animation: slideUp 0.3s ease;
        }

        .toast.show {
            display: block;
        }

        /* Mobile Tab Bar */
        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.08);
            z-index: 1000;
            border-top: 1px solid #f1f3f5;
        }

        .tab-btn {
            background: none;
            border: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            color: var(--gray);
            cursor: pointer;
            padding: 8px;
            font-size: 12px;
            transition: all 0.3s;
            position: relative;
        }

        .tab-btn.active {
            color: var(--primary);
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            top: -15px;
            width: 30px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
        }

        .tab-btn i {
            font-size: 22px;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translate(-50%, 30px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

        .fade-in {
            animation: fadeIn 0.3s ease;
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .subject-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .navbar {
                padding: 15px 20px;
            }
            
            .main-content {
                padding: 20px 15px;
            }
            
            .modal {
                padding: 25px;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .branch-selection {
                grid-template-columns: 1fr;
            }
            
            .admin-table {
                display: block;
                overflow-x: auto;
            }
        }

        /* Utility Classes */
        .text-center { text-align: center; }
        .mb-20 { margin-bottom: 20px; }
        .mt-20 { margin-top: 20px; }
        .mb-30 { margin-bottom: 30px; }
        .mt-30 { margin-top: 30px; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div id="app"></div>
    
    <script>
        // Professional Database Structure
        const database = {
            // Predefined Admin Account
            admin: {
                serialNo: "S/26/0000",
                password: "edu2026admin",
                name: "Ayokunle ðŸ˜Ž",
                email: "admin@edunova.com",
                role: "admin",
                branch: "staff",
                joinDate: "2024-01-01",
                status: "active"
            },
            
            // Predefined Student Account
            preStudent: {
                serialNo: "S/26/0001",
                password: "edu2026chidi",
                name: "Chidima ðŸ˜",
                email: "chidima@edunova.com",
                role: "student",
                grade: "Grade 1",
                branch: "student",
                joinDate: "2024-01-15",
                status: "active",
                progress: {},
                lastActive: new Date().toISOString()
            },
            
            // Pending approvals
            pendingApprovals: [],
            
            // Approved users
            users: [],
            
            // Subjects Database
            subjects: {
                grade1: [
                    {
                        id: 1,
                        name: "Mathematics",
                        color: "#4361ee",
                        icon: "fa-calculator",
                        description: "Master numbers, operations, and problem-solving skills",
                        lessons: [
                            { id: 1, title: "Counting 1-100", duration: "20 min", type: "interactive", completed: false },
                            { id: 2, title: "Basic Addition", duration: "25 min", type: "video", completed: false },
                            { id: 3, title: "Basic Subtraction", duration: "25 min", type: "quiz", completed: false },
                            { id: 4, title: "Shapes & Patterns", duration: "30 min", type: "interactive", completed: false },
                            { id: 5, title: "Measurement", duration: "20 min", type: "video", completed: false },
                            { id: 6, title: "Time & Money", duration: "25 min", type: "practice", completed: false }
                        ]
                    },
                    {
                        id: 2,
                        name: "English Language",
                        color: "#2ec4b6",
                        icon: "fa-language",
                        description: "Develop reading, writing, and communication skills",
                        lessons: [
                            { id: 1, title: "Phonics & Alphabet", duration: "25 min", type: "interactive", completed: false },
                            { id: 2, title: "Basic Vocabulary", duration: "30 min", type: "video", completed: false },
                            { id: 3, title: "Simple Sentences", duration: "25 min", type: "practice", completed: false },
                            { id: 4, title: "Reading Comprehension", duration: "30 min", type: "reading", completed: false },
                            { id: 5, title: "Grammar Basics", duration: "25 min", type: "quiz", completed: false },
                            { id: 6, title: "Creative Writing", duration: "35 min", type: "interactive", completed: false }
                        ]
                    },
                    {
                        id: 3,
                        name: "French Language",
                        color: "#ff6b6b",
                        icon: "fa-flag",
                        description: "Learn basic French vocabulary and conversation",
                        lessons: [
                            { id: 1, title: "French Alphabet", duration: "20 min", type: "interactive", completed: false },
                            { id: 2, title: "Basic Greetings", duration: "25 min", type: "video", completed: false },
                            { id: 3, title: "Numbers 1-50", duration: "20 min", type: "practice", completed: false },
                            { id: 4, title: "Common Phrases", duration: "30 min", type: "video", completed: false },
                            { id: 5, title: "Family & Friends", duration: "25 min", type: "interactive", completed: false },
                            { id: 6, title: "Food & Drinks", duration: "30 min", type: "quiz", completed: false }
                        ]
                    },
                    {
                        id: 4,
                        name: "Nigerian Languages",
                        color: "#ff9f1c",
                        icon: "fa-globe-africa",
                        description: "Choose from Yoruba, Hausa, or Igbo languages",
                        selectedLanguage: null,
                        lessons: [
                            { id: 1, title: "Language Selection", duration: "5 min", type: "selection", completed: false },
                            { id: 2, title: "Basic Greetings", duration: "25 min", type: "video", completed: false },
                            { id: 3, title: "Common Phrases", duration: "30 min", type: "interactive", completed: false },
                            { id: 4, title: "Numbers 1-100", duration: "25 min", type: "practice", completed: false },
                            { id: 5, title: "Cultural Context", duration: "30 min", type: "video", completed: false },
                            { id: 6, title: "Daily Conversations", duration: "35 min", type: "roleplay", completed: false }
                        ]
                    },
                    {
                        id: 5,
                        name: "Sign Language",
                        color: "#7209b7",
                        icon: "fa-hands",
                        description: "Learn basic sign language for communication",
                        lessons: [
                            { id: 1, title: "Alphabet in Signs", duration: "35 min", type: "video", completed: false },
                            { id: 2, title: "Basic Signs", duration: "30 min", type: "interactive", completed: false },
                            { id: 3, title: "Daily Communication", duration: "35 min", type: "practice", completed: false },
                            { id: 4, title: "Emergency Signs", duration: "25 min", type: "video", completed: false },
                            { id: 5, title: "Numbers & Time", duration: "30 min", type: "interactive", completed: false },
                            { id: 6, title: "Practice Session", duration: "40 min", type: "roleplay", completed: false }
                        ]
                    },
                    {
                        id: 6,
                        name: "Science",
                        color: "#06d6a0",
                        icon: "fa-flask",
                        description: "Explore the wonders of the natural world",
                        lessons: [
                            { id: 1, title: "Living Things", duration: "25 min", type: "video", completed: false },
                            { id: 2, title: "Plants & Animals", duration: "30 min", type: "interactive", completed: false },
                            { id: 3, title: "Human Body", duration: "35 min", type: "quiz", completed: false },
                            { id: 4, title: "Weather & Climate", duration: "25 min", type: "video", completed: false },
                            { id: 5, title: "Simple Experiments", duration: "30 min", type: "interactive", completed: false },
                            { id: 6, title: "Environmental Care", duration: "25 min", type: "practice", completed: false }
                        ]
                    },
                    {
                        id: 7,
                        name: "Social Studies",
                        color: "#3a86ff",
                        icon: "fa-users",
                        description: "Understand society, culture, and citizenship",
                        lessons: [
                            { id: 1, title: "Family & Community", duration: "20 min", type: "video", completed: false },
                            { id: 2, title: "Nigerian Culture", duration: "30 min", type: "interactive", completed: false },
                            { id: 3, title: "Basic Rights", duration: "25 min", type: "quiz", completed: false },
                            { id: 4, title: "Good Citizenship", duration: "25 min", type: "practice", completed: false },
                            { id: 5, title: "History & Heritage", duration: "30 min", type: "video", completed: false },
                            { id: 6, title: "Global Awareness", duration: "25 min", type: "interactive", completed: false }
                        ]
                    }
                ],
                grade2: [
                    // Grade 2 subjects would go here
                ]
            },
            
            // Assessment Questions
            assessments: {
                grade1: [
                    { id: 1, question: "What is 15 + 7?", options: ["20", "21", "22", "23"], correct: 2 },
                    { id: 2, question: "Which is a vowel?", options: ["B", "C", "E", "D"], correct: 2 },
                    { id: 3, question: "What is the capital of Nigeria?", options: ["Lagos", "Abuja", "Kano", "Ibadan"], correct: 1 }
                ]
            },
            
            // Videos Library
            videos: [
                { id: 1, title: "Mathematics Fundamentals", subject: "Mathematics", grade: "Grade 1", duration: "15:30" },
                { id: 2, title: "French for Beginners", subject: "French", grade: "Grade 1", duration: "20:15" },
                { id: 3, title: "Yoruba Greetings", subject: "Nigerian Languages", grade: "Grade 1", duration: "18:45" }
            ],
            
            // System Settings
            settings: {
                lastSerialNo: 1, // Last generated serial number
                academicYear: "2026",
                approvalRequired: true
            }
        };

        // Constants
        const grades = ["Grade 1", "Grade 2", "Grade 3", "Grade 4", "Grade 5", "Grade 6", "Grade 7", "Grade 8"];
        const nigerianLanguages = ["Yoruba", "Hausa", "Igbo"];
        const branches = [
            { id: "staff", name: "EduNova Staff", icon: "fa-user-tie", color: "#4361ee" },
            { id: "student", name: "EduNova Student", icon: "fa-user-graduate", color: "#2ec4b6" }
        ];

        // App State
        let currentUser = null;
        let isLogin = true;
        let activeBranch = "student";
        let activeView = "dashboard";
        let selectedGrade = "Grade 1";
        let showAssessment = false;
        let showApprovalModal = false;
        let showLanguageSelect = false;
        let showSidebar = false;
        let currentLesson = null;
        let assessmentAnswers = [];

        // Initialize App
        function initApp() {
            // Initialize localStorage if empty
            if (!localStorage.getItem('edunova_database')) {
                // Add predefined users to database
                database.users.push(database.preStudent);
                saveDatabase();
            } else {
                loadDatabase();
            }
            
            // Check for stored session
            const storedUser = localStorage.getItem('edunova_user');
            if (storedUser) {
                currentUser = JSON.parse(storedUser);
                renderDashboard();
            } else {
                renderLogin();
            }
        }

        // Database Management
        function saveDatabase() {
            localStorage.setItem('edunova_database', JSON.stringify(database));
        }

        function loadDatabase() {
            const saved = localStorage.getItem('edunova_database');
            if (saved) {
                const parsed = JSON.parse(saved);
                Object.assign(database, parsed);
            }
        }

        // Generate Serial Number
        function generateSerialNo() {
            database.settings.lastSerialNo++;
            saveDatabase();
            return `S/26/${database.settings.lastSerialNo.toString().padStart(4, '0')}`;
        }

        // Toast Notification System
        function showToast(message, type = "info") {
            const toast = document.createElement('div');
            toast.className = 'toast show';
            toast.textContent = message;
            toast.style.background = type === "success" ? "var(--success)" : 
                                   type === "error" ? "var(--danger)" : 
                                   type === "warning" ? "var(--warning)" : "var(--dark)";
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Render Login Page
        function renderLogin() {
            const app = document.getElementById('app');
            app.innerHTML = `
                <div class="login-container fade-in">
                    <div class="login-header">
                        <div class="logo-container">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h1>EduNova Pro</h1>
                        <p>Professional Learning Management System for Academic Excellence</p>
                    </div>
                    
                    <div class="branch-selection">
                        ${branches.map(branch => `
                            <div class="branch-card ${activeBranch === branch.id ? 'active' : ''}" 
                                 onclick="setActiveBranch('${branch.id}')">
                                <div class="branch-icon" style="background: ${branch.color}">
                                    <i class="fas ${branch.icon}"></i>
                                </div>
                                <h3>${branch.name}</h3>
                                <p>Access ${branch.name.toLowerCase()} portal</p>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="toggle-switch">
                        <button class="toggle-btn ${isLogin ? 'active' : ''}" onclick="toggleLoginMode(true)">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                        <button class="toggle-btn ${!isLogin ? 'active' : ''}" onclick="toggleLoginMode(false)">
                            <i class="fas fa-user-plus"></i> Sign Up
                        </button>
                    </div>
                    
                    ${isLogin ? renderLoginForm() : renderSignupForm()}
                    
                    <div class="text-center mt-30" style="color: var(--gray); font-size: 14px;">
                        <p>Â© 2024 EduNova Pro. All rights reserved.</p>
                        <p>Version 2.0.1</p>
                    </div>
                </div>
            `;
        }

        function renderLoginForm() {
            const placeholder = activeBranch === "staff" ? "S/26/0000" : "S/26/0001";
            return `
                <form onsubmit="handleLogin(event)" id="loginForm">
                    <div class="form-group">
                        <label>${activeBranch === "staff" ? "Staff Serial Number" : "Student Serial Number"}</label>
                        <input type="text" class="form-control" name="serialNo" 
                               placeholder="${placeholder}" required 
                               pattern="S\\/26\\/\\d{4}" 
                               title="Format: S/26/0000">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" class="form-control" name="password" 
                               placeholder="Enter your password" required>
                    </div>
                    <button type="submit" class="btn" id="loginBtn">
                        <i class="fas fa-lock"></i> Access ${activeBranch === "staff" ? "Staff" : "Student"} Portal
                    </button>
                    
                    <div style="margin-top: 20px; padding: 15px; background: var(--light); border-radius: 12px;">
                        <p style="font-size: 14px; color: var(--gray); margin-bottom: 10px;">
                            <i class="fas fa-info-circle"></i> Demo Credentials:
                        </p>
                        ${activeBranch === "staff" ? `
                            <p style="font-size: 13px; margin-bottom: 5px;">
                                <strong>Admin:</strong> S/26/0000 â€¢ edu2026admin
                            </p>
                        ` : `
                            <p style="font-size: 13px; margin-bottom: 5px;">
                                <strong>Student:</strong> S/26/0001 â€¢ edu2026chidi
                            </p>
                        `}
                    </div>
                </form>
            `;
        }

        function renderSignupForm() {
            if (activeBranch === "staff") {
                return `
                    <div style="text-align: center; padding: 30px;">
                        <div style="width: 80px; height: 80px; background: var(--light); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                            <i class="fas fa-user-tie" style="font-size: 36px; color: var(--gray);"></i>
                        </div>
                        <h3 style="margin-bottom: 15px; color: var(--dark);">Staff Registration</h3>
                        <p style="color: var(--gray); margin-bottom: 20px;">
                            Staff accounts can only be created by system administrators.
                            Please contact your administrator for access.
                        </p>
                        <button class="btn btn-secondary" onclick="toggleLoginMode(true)">
                            <i class="fas fa-arrow-left"></i> Back to Login
                        </button>
                    </div>
                `;
            }

            return `
                <form onsubmit="handleSignup(event)">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" class="form-control" name="name" 
                               placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" class="form-control" name="email" 
                               placeholder="student@email.com" required>
                    </div>
                    <div class="form-group">
                        <label>Date of Birth</label>
                        <input type="date" class="form-control" name="dob" required>
                    </div>
                    <div class="form-group">
                        <label>Create Password</label>
                        <input type="password" class="form-control" name="password" 
                               placeholder="Create secure password" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label>Confirm Password</label>
                        <input type="password" class="form-control" name="confirmPassword" 
                               placeholder="Re-enter password" required>
                    </div>
                    
                    <div style="margin: 25px 0; padding: 20px; background: linear-gradient(135deg, rgba(67, 97, 238, 0.05), rgba(46, 196, 182, 0.05)); border-radius: 12px;">
                        <h4 style="margin-bottom: 10px; color: var(--dark); font-size: 16px;">
                            <i class="fas fa-id-card"></i> Account Information
                        </h4>
                        <p style="font-size: 14px; color: var(--gray); margin-bottom: 5px;">
                            <strong>Serial Number:</strong> Will be generated after approval
                        </p>
                        <p style="font-size: 14px; color: var(--gray);">
                            <strong>Status:</strong> Pending Admin Approval
                        </p>
                    </div>
                    
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-paper-plane"></i> Submit for Approval
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="toggleLoginMode(true)" style="margin-top: 10px;">
                        <i class="fas fa-arrow-left"></i> Back to Login
                    </button>
                </form>
            `;
        }

        // Event Handlers
        function setActiveBranch(branch) {
            activeBranch = branch;
            renderLogin();
        }

        function toggleLoginMode(login) {
            isLogin = login;
            renderLogin();
        }

        function handleLogin(event) {
            event.preventDefault();
            const serialNo = event.target.serialNo.value.trim();
            const password = event.target.password.value;

            // Check admin login
            if (serialNo === database.admin.serialNo && password === database.admin.password) {
                currentUser = database.admin;
                localStorage.setItem('edunova_user', JSON.stringify(currentUser));
                showToast(`Welcome back, ${currentUser.name}!`, "success");
                renderDashboard();
                return;
            }

            // Check approved users
            const user = database.users.find(u => u.serialNo === serialNo && u.password === password);
            if (user) {
                if (user.status === "pending") {
                    showToast("Account pending admin approval. Please wait.", "warning");
                    return;
                }
                
                if (user.status === "rejected") {
                    showToast("Account registration was rejected. Please contact admin.", "error");
                    return;
                }
                
                if (user.status === "suspended") {
                    showToast("Account is suspended. Please contact admin.", "error");
                    return;
                }
                
                currentUser = user;
                localStorage.setItem('edunova_user', JSON.stringify(currentUser));
                showToast(`Welcome ${currentUser.name}! Let's learn!`, "success");
                
                // Show assessment for new students without grade
                if (currentUser.role === "student" && !currentUser.grade && !user.hasTakenAssessment) {
                    showAssessment = true;
                }
                
                renderDashboard();
                return;
            }

            showToast("Invalid serial number or password", "error");
        }

        function handleSignup(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const name = formData.get('name');
            const email = formData.get('email');
            const dob = formData.get('dob');
            const password = formData.get('password');
            const confirmPassword = formData.get('confirmPassword');

            // Validation
            if (password !== confirmPassword) {
                showToast("Passwords do not match", "error");
                return;
            }

            if (password.length < 6) {
                showToast("Password must be at least 6 characters", "error");
                return;
            }

            // Check if email already exists
            if (database.users.some(u => u.email === email) || 
                database.pendingApprovals.some(u => u.email === email)) {
                showToast("Email already registered", "error");
                return;
            }

            // Create pending approval
            const newStudent = {
                id: `pending_${Date.now()}`,
                name,
                email,
                dob,
                password,
                role: "student",
                branch: "student",
                requestedDate: new Date().toISOString(),
                status: "pending",
                notes: "Awaiting admin approval"
            };

            database.pendingApprovals.push(newStudent);
            saveDatabase();
            
            showToast("Registration submitted! Awaiting admin approval.", "success");
            toggleLoginMode(true);
        }

        // Admin Functions
        function approveUser(userId) {
            const userIndex = database.pendingApprovals.findIndex(u => u.id === userId);
            if (userIndex === -1) return;

            const user = database.pendingApprovals[userIndex];
            user.serialNo = generateSerialNo();
            user.status = "active";
            user.joinDate = new Date().toISOString();
            user.grade = "Grade 1";
            user.progress = {};

            database.users.push(user);
            database.pendingApprovals.splice(userIndex, 1);
            saveDatabase();

            showToast(`Approved ${user.name}. Serial: ${user.serialNo}`, "success");
            renderDashboard();
        }

        function rejectUser(userId, reason) {
            const userIndex = database.pendingApprovals.findIndex(u => u.id === userId);
            if (userIndex === -1) return;

            const user = database.pendingApprovals[userIndex];
            user.status = "rejected";
            user.rejectionReason = reason || "Registration rejected";
            saveDatabase();

            showToast(`Rejected ${user.name}`, "warning");
            renderDashboard();
        }

        // Dashboard Rendering
        function renderDashboard() {
            if (!currentUser) {
                renderLogin();
                return;
            }

            const app = document.getElementById('app');
            app.innerHTML = `
                <div class="dashboard">
                    ${renderNavbar()}
                    
                    <div class="sidebar-overlay ${showSidebar ? 'active' : ''}" onclick="toggleSidebar()"></div>
                    <div class="sidebar ${showSidebar ? 'active' : ''}">
                        ${renderSidebar()}
                    </div>
                    
                    <div class="main-content">
                        ${renderActiveView()}
                    </div>
                    
                    ${showApprovalModal ? renderApprovalModal() : ''}
                    ${showAssessment ? renderAssessmentModal() : ''}
                    ${showLanguageSelect ? renderLanguageSelectModal() : ''}
                    ${currentLesson ? renderLessonModal() : ''}
                    
                    ${currentUser.role === "student" ? renderStudentTabBar() : ''}
                </div>
            `;
        }

        function renderNavbar() {
            return `
                <div class="navbar">
                    <button class="mobile-menu-btn" onclick="toggleSidebar()" style="background: none; border: none; font-size: 24px; color: var(--dark); padding: 8px; border-radius: 10px; cursor: pointer;">
                        <i class="fas fa-bars"></i>
                    </button>
                    
                    <div class="navbar-brand">
                        <div class="brand-logo">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="brand-text">
                            <h1>EduNova Pro</h1>
                            <p>${currentUser.role === 'admin' ? 'Admin Portal' : currentUser.role === 'teacher' ? 'Teacher Portal' : 'Student Portal'}</p>
                        </div>
                    </div>
                    
                    <div class="user-info">
                        <div class="user-badge" onclick="toggleSidebar()" style="cursor: pointer;">
                            <div class="user-avatar">
                                ${currentUser.name.charAt(0).toUpperCase()}
                            </div>
                            <div class="user-details">
                                <div class="user-name">${currentUser.name}</div>
                                <div class="user-role">${currentUser.serialNo} â€¢ ${currentUser.role.toUpperCase()}</div>
                            </div>
                            <i class="fas fa-chevron-down" style="color: var(--gray); font-size: 14px;"></i>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderSidebar() {
            const menuItems = currentUser.role === 'admin' ? [
                { id: 'dashboard', icon: 'fa-tachometer-alt', label: 'Dashboard' },
                { id: 'approvals', icon: 'fa-user-clock', label: 'Pending Approvals', badge: database.pendingApprovals.length },
                { id: 'users', icon: 'fa-users', label: 'User Management' },
                { id: 'reports', icon: 'fa-chart-bar', label: 'Reports & Analytics' },
                { id: 'settings', icon: 'fa-cog', label: 'System Settings' }
            ] : currentUser.role === 'student' ? [
                { id: 'dashboard', icon: 'fa-home', label: 'Dashboard' },
                { id: 'subjects', icon: 'fa-book-open', label: 'My Subjects' },
                { id: 'progress', icon: 'fa-chart-line', label: 'Progress Tracker' },
                { id: 'library', icon: 'fa-video', label: 'Video Library' },
                { id: 'profile', icon: 'fa-user', label: 'My Profile' },
                { id: 'help', icon: 'fa-question-circle', label: 'Help & Support' }
            ] : [];

            return `
                <div class="sidebar-header">
                    <div class="user-profile">
                        <div class="profile-avatar" style="background: ${currentUser.role === 'admin' ? 'linear-gradient(135deg, #4361ee, #3a56d4)' : 'linear-gradient(135deg, #2ec4b6, #25b0a4)'};">
                            ${currentUser.name.charAt(0).toUpperCase()}
                        </div>
                        <div class="profile-info">
                            <h3>${currentUser.name}</h3>
                            <p>${currentUser.serialNo}</p>
                            <p>${currentUser.role.toUpperCase()}</p>
                        </div>
                    </div>
                </div>
                
                <ul class="sidebar-menu">
                    ${menuItems.map(item => `
                        <li>
                            <button class="menu-btn ${activeView === item.id ? 'active' : ''}" onclick="setActiveView('${item.id}')">
                                <i class="fas ${item.icon}"></i>
                                ${item.label}
                                ${item.badge ? `<span style="margin-left: auto; background: var(--accent); color: white; font-size: 12px; padding: 2px 8px; border-radius: 10px;">${item.badge}</span>` : ''}
                            </button>
                        </li>
                    `).join('')}
                    
                    <li style="margin-top: 30px;">
                        <button class="menu-btn" onclick="handleLogout()" style="color: var(--danger);">
                            <i class="fas fa-sign-out-alt"></i>
                            Logout
                        </button>
                    </li>
                </ul>
            `;
        }

        function renderActiveView() {
            switch(activeView) {
                case 'dashboard': return renderDashboardView();
                case 'approvals': return renderApprovalsView();
                case 'users': return renderUsersView();
                case 'reports': return renderReportsView();
                case 'settings': return renderSettingsView();
                case 'subjects': return renderSubjectsView();
                case 'progress': return renderProgressView();
                case 'library': return renderLibraryView();
                case 'profile': return renderProfileView();
                default: return renderDashboardView();
            }
        }

        function renderDashboardView() {
            if (currentUser.role === 'admin') {
                return renderAdminDashboard();
            } else if (currentUser.role === 'student') {
                return renderStudentDashboard();
            }
            return '<div class="content-header"><h2>Welcome</h2></div>';
        }

        function renderAdminDashboard() {
            const totalUsers = database.users.length;
            const pendingApprovals = database.pendingApprovals.length;
            const activeToday = Math.floor(totalUsers * 0.7);
            
            return `
                <div class="content-header">
                    <h2>Admin Dashboard</h2>
                    <p>System Overview & Management</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Users</h3>
                        <div class="stat-value">${totalUsers}</div>
                        <p>Registered accounts</p>
                    </div>
                    <div class="stat-card">
                        <h3>Pending Approvals</h3>
                        <div class="stat-value">${pendingApprovals}</div>
                        <p>Awaiting review</p>
                    </div>
                    <div class="stat-card">
                        <h3>Active Today</h3>
                        <div class="stat-value">${activeToday}</div>
                        <p>Currently online</p>
                    </div>
                    <div class="stat-card">
                        <h3>System Status</h3>
                        <div class="stat-value">100%</div>
                        <p>All systems operational</p>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 25px; margin-top: 30px;">
                    <div style="background: white; padding: 25px; border-radius: 18px; box-shadow: var(--card-shadow);">
                        <h3 style="margin-bottom: 20px; color: var(--dark);">Recent Activities</h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8fafc; border-radius: 12px;">
                                <div style="width: 40px; height: 40px; background: var(--success); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <i class="fas fa-user-check"></i>
                                </div>
                                <div style="flex: 1;">
                                    <div style="font-weight: 600; color: var(--dark);">New Student Approved</div>
                                    <div style="font-size: 14px; color: var(--gray);">Chidima ðŸ˜ - S/26/0001</div>
                                </div>
                                <div style="font-size: 14px; color: var(--gray);">2 min ago</div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8fafc; border-radius: 12px;">
                                <div style="width: 40px; height: 40px; background: var(--accent); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <i class="fas fa-user-clock"></i>
                                </div>
                                <div style="flex: 1;">
                                    <div style="font-weight: 600; color: var(--dark);">Registration Pending</div>
                                    <div style="font-size: 14px; color: var(--gray);">1 new student waiting approval</div>
                                </div>
                                <button class="action-btn approve" onclick="setActiveView('approvals')">
                                    <i class="fas fa-eye"></i> Review
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); padding: 25px; border-radius: 18px; color: white;">
                        <h3 style="margin-bottom: 20px; color: white;">Quick Actions</h3>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <button class="btn" onclick="setActiveView('approvals')" style="background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px);">
                                <i class="fas fa-user-check"></i> Review Approvals
                            </button>
                            <button class="btn" onclick="setActiveView('users')" style="background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px);">
                                <i class="fas fa-users-cog"></i> Manage Users
                            </button>
                            <button class="btn" onclick="setActiveView('reports')" style="background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px);">
                                <i class="fas fa-chart-pie"></i> View Reports
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderStudentDashboard() {
            const subjects = database.subjects.grade1;
            const totalLessons = subjects.reduce((sum, subj) => sum + subj.lessons.length, 0);
            const completedLessons = subjects.reduce((sum, subj) => 
                sum + subj.lessons.filter(l => l.completed).length, 0
            );
            const progress = totalLessons > 0 ? Math.round((completedLessons / totalLessons) * 100) : 0;
            
            return `
                <div class="content-header">
                    <h2>Welcome, ${currentUser.name.split(' ')[0]}! ðŸ‘‹</h2>
                    <p>Continue your learning journey in ${currentUser.grade || 'Grade 1'}</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Current Grade</h3>
                        <div class="stat-value">${currentUser.grade?.replace('Grade ', '') || '1'}</div>
                        <p>Academic Level</p>
                    </div>
                    <div class="stat-card">
                        <h3>Progress</h3>
                        <div class="stat-value">${progress}%</div>
                        <p>Overall Completion</p>
                    </div>
                    <div class="stat-card">
                        <h3>Learning Streak</h3>
                        <div class="stat-value">${Math.floor(Math.random() * 10) + 1} days</div>
                        <p>Consistent Learning</p>
                    </div>
                    <div class="stat-card">
                        <h3>Points Earned</h3>
                        <div class="stat-value">${Math.floor(Math.random() * 500) + 100}</div>
                        <p>Achievement Points</p>
                    </div>
                </div>
                
                <div style="margin: 30px 0; display: flex; justify-content: space-between; align-items: center;">
                    <h3 style="color: var(--dark);">My Subjects</h3>
                    <button class="btn" onclick="setActiveView('subjects')" style="width: auto; padding: 10px 20px;">
                        View All <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
                
                <div class="subject-grid">
                    ${subjects.slice(0, 3).map(subject => {
                        const subjProgress = Math.round((subject.lessons.filter(l => l.completed).length / subject.lessons.length) * 100);
                        return `
                            <div class="subject-card" onclick="startSubjectLearning(${subject.id})" style="cursor: pointer;">
                                <div class="subject-header" style="background: ${subject.color}">
                                    <h3><i class="fas ${subject.icon}"></i> ${subject.name}</h3>
                                    <p>${subject.description}</p>
                                </div>
                                <div class="subject-body">
                                    <div class="progress-container">
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: ${subjProgress}%; background: ${subject.color};"></div>
                                        </div>
                                        <div class="progress-text">
                                            <span>Progress</span>
                                            <span>${subjProgress}%</span>
                                        </div>
                                    </div>
                                    <div style="margin-top: 20px; display: flex; align-items: center; justify-content: space-between;">
                                        <span style="font-size: 14px; color: var(--gray);">
                                            ${subject.lessons.filter(l => l.completed).length}/${subject.lessons.length} lessons
                                        </span>
                                        <button class="btn" style="width: auto; padding: 10px 20px; background: ${subject.color};">
                                            Continue
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
                
                <div style="margin-top: 30px; background: white; padding: 25px; border-radius: 18px; box-shadow: var(--card-shadow);">
                    <h3 style="margin-bottom: 20px; color: var(--dark);">ðŸŽ¯ Today's Learning Goals</h3>
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8fafc; border-radius: 12px;">
                            <div style="width: 40px; height: 40px; background: var(--primary); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white;">
                                <i class="fas fa-calculator"></i>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--dark);">Complete Math Lesson</div>
                                <div style="font-size: 14px; color: var(--gray);">Basic Addition - 25 min</div>
                            </div>
                            <button class="btn" style="width: auto; padding: 8px 16px; font-size: 14px;">Start</button>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8fafc; border-radius: 12px;">
                            <div style="width: 40px; height: 40px; background: #ff6b6b; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white;">
                                <i class="fas fa-flag"></i>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--dark);">French Vocabulary Practice</div>
                                <div style="font-size: 14px; color: var(--gray);">Basic Greetings - 20 min</div>
                            </div>
                            <button class="btn" style="width: auto; padding: 8px 16px; font-size: 14px;">Start</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderApprovalsView() {
            if (currentUser.role !== 'admin') return '';
            
            return `
                <div class="content-header">
                    <h2>Pending Approvals</h2>
                    <p>Review and approve new student registrations</p>
                </div>
                
                ${database.pendingApprovals.length === 0 ? `
                    <div style="text-align: center; padding: 60px 20px;">
                        <div style="width: 100px; height: 100px; background: var(--light); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                            <i class="fas fa-check-circle" style="font-size: 48px; color: var(--success);"></i>
                        </div>
                        <h3 style="margin-bottom: 10px; color: var(--dark);">No Pending Approvals</h3>
                        <p style="color: var(--gray);">All registration requests have been processed.</p>
                    </div>
                ` : `
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Date of Birth</th>
                                <th>Requested On</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${database.pendingApprovals.map(user => `
                                <tr>
                                    <td>
                                        <div style="font-weight: 600; color: var(--dark);">${user.name}</div>
                                        <div style="font-size: 13px; color: var(--gray);">Pending Serial Number</div>
                                    </td>
                                    <td>${user.email}</td>
                                    <td>${new Date(user.dob).toLocaleDateString()}</td>
                                    <td>${new Date(user.requestedDate).toLocaleDateString()}</td>
                                    <td>
                                        <span class="status-badge status-pending-approval">
                                            Pending Approval
                                        </span>
                                    </td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="action-btn approve" onclick="approveUser('${user.id}')">
                                                <i class="fas fa-check"></i> Approve
                                            </button>
                                            <button class="action-btn reject" onclick="rejectUser('${user.id}', 'Registration rejected')">
                                                <i class="fas fa-times"></i> Reject
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `}
            `;
        }

        function renderSubjectsView() {
            const subjects = database.subjects.grade1;
            
            return `
                <div class="content-header">
                    <h2>My Subjects</h2>
                    <p>Explore and continue your learning journey</p>
                    
                    <div class="grade-selection" style="display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
                        ${grades.map((grade, index) => {
                            const isCurrent = grade === selectedGrade;
                            const isUnlocked = index === 0 || 
                                (currentUser.grade && grades.indexOf(currentUser.grade) >= index);
                            
                            return `
                                <div class="grade-card ${isCurrent ? 'active' : ''} ${!isUnlocked ? 'locked' : ''}"
                                     onclick="${isUnlocked ? `selectGrade('${grade}')` : ''}" 
                                     style="flex: 1; min-width: 120px;">
                                    <h3>${grade}</h3>
                                    <p>${isCurrent ? 'Current' : isUnlocked ? 'Available' : 'Locked'}</p>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
                
                <div class="subject-grid">
                    ${subjects.map(subject => {
                        const completedLessons = subject.lessons.filter(l => l.completed).length;
                        const totalLessons = subject.lessons.length;
                        const progress = Math.round((completedLessons / totalLessons) * 100);
                        
                        return `
                            <div class="subject-card">
                                <div class="subject-header" style="background: ${subject.color}">
                                    <h3><i class="fas ${subject.icon}"></i> ${subject.name}</h3>
                                    <p>${subject.description}</p>
                                </div>
                                <div class="subject-body">
                                    <div class="progress-container">
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: ${progress}%; background: ${subject.color};"></div>
                                        </div>
                                        <div class="progress-text">
                                            <span>${completedLessons}/${totalLessons} lessons</span>
                                            <span>${progress}% complete</span>
                                        </div>
                                    </div>
                                    
                                    ${subject.name === "Nigerian Languages" && subject.selectedLanguage ? `
                                        <div style="margin: 20px 0; padding: 15px; background: rgba(255, 159, 28, 0.1); border-radius: 12px; border: 1px solid rgba(255, 159, 28, 0.2);">
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <i class="fas fa-language" style="color: var(--accent);"></i>
                                                <div>
                                                    <div style="font-weight: 600; color: var(--dark);">Selected Language</div>
                                                    <div style="font-size: 14px; color: var(--gray);">${subject.selectedLanguage}</div>
                                                </div>
                                            </div>
                                        </div>
                                    ` : ''}
                                    
                                    <ul class="lessons-list">
                                        ${subject.lessons.slice(0, 4).map(lesson => `
                                            <li class="lesson-item" onclick="startLesson(${subject.id}, ${lesson.id})" style="cursor: pointer;">
                                                <div class="lesson-info">
                                                    <div class="lesson-icon" style="background: ${subject.color}">
                                                        <i class="fas ${lesson.type === 'video' ? 'fa-play' : lesson.type === 'quiz' ? 'fa-question' : 'fa-book'}" style="font-size: 16px;"></i>
                                                    </div>
                                                    <div class="lesson-details">
                                                        <div class="lesson-title">${lesson.title}</div>
                                                        <div class="lesson-meta">
                                                            <span><i class="far fa-clock"></i> ${lesson.duration}</span>
                                                            <span><i class="fas fa-${lesson.type === 'video' ? 'video' : 'tasks'}"></i> ${lesson.type}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <span class="status-badge ${lesson.completed ? 'status-completed' : 'status-pending'}">
                                                    ${lesson.completed ? 'Completed' : 'Start'}
                                                </span>
                                            </li>
                                        `).join('')}
                                    </ul>
                                    
                                    <button class="btn" onclick="startSubjectLearning(${subject.id})" style="background: ${subject.color};">
                                        <i class="fas fa-play-circle"></i> Continue Learning
                                    </button>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function renderProgressView() {
            const subjects = database.subjects.grade1;
            const totalLessons = subjects.reduce((sum, subj) => sum + subj.lessons.length, 0);
            const completedLessons = subjects.reduce((sum, subj) => 
                sum + subj.lessons.filter(l => l.completed).length, 0
            );
            const progress = totalLessons > 0 ? Math.round((completedLessons / totalLessons) * 100) : 0;
            
            return `
                <div class="content-header">
                    <h2>Progress Tracker</h2>
                    <p>Monitor your learning achievements and milestones</p>
                </div>
                
                <div style="background: white; padding: 30px; border-radius: 18px; box-shadow: var(--card-shadow); margin-bottom: 30px;">
                    <div style="display: flex; align-items: center; gap: 30px; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 200px;">
                            <h3 style="margin-bottom: 20px; color: var(--dark);">Overall Progress</h3>
                            <div class="progress-bar" style="height: 16px; margin-bottom: 15px;">
                                <div class="progress-fill" style="width: ${progress}%; background: linear-gradient(90deg, var(--primary), var(--secondary));"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div class="stat-value">${progress}%</div>
                                    <div style="font-size: 14px; color: var(--gray);">Overall completion</div>
                                </div>
                                <div>
                                    <div style="font-size: 24px; font-weight: 700; color: var(--dark);">${completedLessons}/${totalLessons}</div>
                                    <div style="font-size: 14px; color: var(--gray);">Lessons completed</div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="flex: 1; min-width: 200px;">
                            <h3 style="margin-bottom: 20px; color: var(--dark);">Achievements</h3>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                                <div style="text-align: center; padding: 15px; background: #f8fafc; border-radius: 12px;">
                                    <div style="font-size: 24px; margin-bottom: 10px;">ðŸ†</div>
                                    <div style="font-weight: 600; font-size: 14px;">Math Master</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: #f8fafc; border-radius: 12px;">
                                    <div style="font-size: 24px; margin-bottom: 10px;">â­</div>
                                    <div style="font-weight: 600; font-size: 14px;">7-Day Streak</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: #f8fafc; border-radius: 12px;">
                                    <div style="font-size: 24px; margin-bottom: 10px;">ðŸ“š</div>
                                    <div style="font-weight: 600; font-size: 14px;">Bookworm</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <h3 style="margin-bottom: 20px; color: var(--dark);">Subject-wise Progress</h3>
                ${subjects.map(subject => {
                    const completed = subject.lessons.filter(l => l.completed).length;
                    const total = subject.lessons.length;
                    const subjProgress = Math.round((completed / total) * 100);
                    
                    return `
                        <div style="background: white; padding: 20px; border-radius: 12px; margin-bottom: 15px; box-shadow: var(--card-shadow);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <div style="width: 40px; height: 40px; background: ${subject.color}; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white;">
                                        <i class="fas ${subject.icon}"></i>
                                    </div>
                                    <div>
                                        <div style="font-weight: 600; color: var(--dark);">${subject.name}</div>
                                        <div style="font-size: 14px; color: var(--gray);">${completed}/${total} lessons</div>
                                    </div>
                                </div>
                                <div style="font-weight: 700; color: ${subject.color};">${subjProgress}%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${subjProgress}%; background: ${subject.color};"></div>
                            </div>
                        </div>
                    `;
                }).join('')}
            `;
        }

        // Lesson Functions
        function startLesson(subjectId, lessonId) {
            const subject = database.subjects.grade1.find(s => s.id === subjectId);
            if (!subject) return;
            
            const lesson = subject.lessons.find(l => l.id === lessonId);
            if (!lesson) return;
            
            // Special handling for Nigerian Languages selection
            if (subject.name === "Nigerian Languages" && lesson.title === "Language Selection") {
                showLanguageSelect = true;
                renderDashboard();
                return;
            }
            
            currentLesson = { ...lesson, subjectId };
            renderDashboard();
        }

        function startSubjectLearning(subjectId) {
            const subject = database.subjects.grade1.find(s => s.id === subjectId);
            if (!subject) return;
            
            // Check for Nigerian Languages selection
            if (subject.name === "Nigerian Languages" && !subject.selectedLanguage) {
                showLanguageSelect = true;
                renderDashboard();
                return;
            }
            
            // Find first incomplete lesson
            const incompleteLesson = subject.lessons.find(l => !l.completed);
            if (incompleteLesson) {
                startLesson(subjectId, incompleteLesson.id);
            } else {
                showToast("All lessons completed in this subject! ðŸŽ‰", "success");
            }
        }

        function completeCurrentLesson() {
            if (!currentLesson) return;
            
            const subject = database.subjects.grade1.find(s => s.id === currentLesson.subjectId);
            if (subject) {
                const lesson = subject.lessons.find(l => l.id === currentLesson.id);
                if (lesson) {
                    lesson.completed = true;
                    saveDatabase();
                    showToast("Lesson completed successfully! ðŸŽ‰", "success");
                    currentLesson = null;
                    renderDashboard();
                }
            }
        }

        // Modal Renderers
        function renderAssessmentModal() {
            const assessment = database.assessments.grade1;
            
            return `
                <div class="modal-overlay">
                    <div class="modal">
                        <div class="modal-header">
                            <h2>ðŸ“ Grade Assessment Test</h2>
                            <button class="close-btn" onclick="showAssessment = false; renderDashboard();">Ã—</button>
                        </div>
                        <p style="margin-bottom: 25px; color: var(--gray); line-height: 1.6;">
                            Welcome to EduNova! This assessment will help us place you in the appropriate grade level. 
                            Answer all questions to the best of your ability.
                        </p>
                        
                        <div class="assessment-container">
                            ${assessment.map((q, qIndex) => `
                                <div class="question">
                                    <h4>Question ${qIndex + 1}: ${q.question}</h4>
                                    <div class="options">
                                        ${q.options.map((option, oIndex) => `
                                            <div class="option ${assessmentAnswers[qIndex] === oIndex ? 'selected' : ''}"
                                                 onclick="selectAnswer(${qIndex}, ${oIndex})">
                                                ${String.fromCharCode(65 + oIndex)}. ${option}
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            `).join('')}
                            
                            <button class="btn" onclick="submitAssessment()" 
                                    style="margin-top: 30px;"
                                    ${assessmentAnswers.length !== assessment.length ? 'disabled' : ''}>
                                <i class="fas fa-paper-plane"></i> Submit Assessment
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderLanguageSelectModal() {
            return `
                <div class="modal-overlay" onclick="showLanguageSelect = false; renderDashboard();">
                    <div class="modal" onclick="event.stopPropagation()">
                        <div class="modal-header">
                            <h2>ðŸŒ Choose Nigerian Language</h2>
                            <button class="close-btn" onclick="showLanguageSelect = false; renderDashboard();">Ã—</button>
                        </div>
                        <p style="margin-bottom: 25px; color: var(--gray);">
                            Select which Nigerian language you would like to learn:
                        </p>
                        
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            ${nigerianLanguages.map((lang, index) => {
                                const colors = ["#ff9f1c", "#4361ee", "#2ec4b6"];
                                return `
                                    <button class="btn" onclick="selectNigerianLanguage('${lang}')" 
                                            style="background: ${colors[index]}; text-align: left; display: flex; align-items: center; gap: 15px;">
                                        <div style="width: 40px; height: 40px; background: rgba(255, 255, 255, 0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-language"></i>
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; font-size: 18px;">${lang}</div>
                                            <div style="font-size: 14px; opacity: 0.9;">Learn ${lang} language and culture</div>
                                        </div>
                                    </button>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function renderLessonModal() {
            if (!currentLesson) return '';
            
            const subject = database.subjects.grade1.find(s => 
                s.lessons && s.lessons.some(l => l.id === currentLesson.id)
            );
            
            return `
                <div class="modal-overlay" onclick="currentLesson = null; renderDashboard();">
                    <div class="modal" style="max-width: 600px;" onclick="event.stopPropagation()">
                        <div class="modal-header">
                            <h2>${currentLesson.title}</h2>
                            <button class="close-btn" onclick="currentLesson = null; renderDashboard();">Ã—</button>
                        </div>
                        
                        <div style="margin: 25px 0; padding: 20px; background: #f8fafc; border-radius: 12px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <span style="font-weight: 600; color: var(--dark);">
                                        <i class="fas fa-book"></i> ${subject?.name || 'Subject'}
                                    </span>
                                    <span style="color: var(--gray);">
                                        <i class="far fa-clock"></i> ${currentLesson.duration}
                                    </span>
                                </div>
                                <span class="status-badge ${currentLesson.completed ? 'status-completed' : 'status-pending'}">
                                    ${currentLesson.completed ? 'Completed' : 'In Progress'}
                                </span>
                            </div>
                        </div>
                        
                        <div style="margin: 25px 0;">
                            <h4 style="margin-bottom: 15px; color: var(--dark);">Lesson Content</h4>
                            <div style="background: white; padding: 25px; border-radius: 12px; border: 1px solid #f1f3f5;">
                                <p style="line-height: 1.6; margin-bottom: 20px;">
                                    This is an interactive lesson about ${currentLesson.title.toLowerCase()}. 
                                    Follow along with the content and complete the exercises.
                                </p>
                                
                                ${currentLesson.type === 'video' ? `
                                    <div style="margin-top: 20px; text-align: center;">
                                        <div style="width: 100%; height: 250px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white;">
                                            <i class="fas fa-play-circle" style="font-size: 60px;"></i>
                                        </div>
                                        <p style="margin-top: 15px; color: var(--gray); font-size: 14px;">
                                            Video lesson content will play here
                                        </p>
                                    </div>
                                ` : ''}
                                
                                ${currentLesson.type === 'quiz' ? `
                                    <div style="margin-top: 20px;">
                                        <h5 style="margin-bottom: 20px; color: var(--dark);">Quiz Questions</h5>
                                        <div style="display: flex; flex-direction: column; gap: 12px;">
                                            <div style="padding: 15px; border: 2px solid #e9ecef; border-radius: 10px; cursor: pointer; transition: all 0.3s;"
                                                 onmouseover="this.style.borderColor='var(--primary)'; this.style.background='#f8fafc';"
                                                 onmouseout="this.style.borderColor='#e9ecef'; this.style.background='white';">
                                                <strong>A.</strong> Option A
                                            </div>
                                            <div style="padding: 15px; border: 2px solid #e9ecef; border-radius: 10px; cursor: pointer; transition: all 0.3s;"
                                                 onmouseover="this.style.borderColor='var(--primary)'; this.style.background='#f8fafc';"
                                                 onmouseout="this.style.borderColor='#e9ecef'; this.style.background='white';">
                                                <strong>B.</strong> Option B
                                            </div>
                                            <div style="padding: 15px; border: 2px solid #e9ecef; border-radius: 10px; cursor: pointer; transition: all 0.3s;"
                                                 onmouseover="this.style.borderColor='var(--primary)'; this.style.background='#f8fafc';"
                                                 onmouseout="this.style.borderColor='#e9ecef'; this.style.background='white';">
                                                <strong>C.</strong> Option C
                                            </div>
                                        </div>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 15px;">
                            <button class="btn" onclick="completeCurrentLesson()" style="flex: 2;">
                                <i class="fas fa-check-circle"></i> 
                                ${currentLesson.completed ? 'Lesson Completed' : 'Mark as Complete'}
                            </button>
                            <button class="btn" onclick="currentLesson = null; renderDashboard();" 
                                    style="flex: 1; background: var(--gray);">
                                <i class="fas fa-times"></i> Close
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderStudentTabBar() {
            return `
                <div class="tab-bar">
                    <button class="tab-btn ${activeView === 'dashboard' ? 'active' : ''}" onclick="setActiveView('dashboard')">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </button>
                    <button class="tab-btn ${activeView === 'subjects' ? 'active' : ''}" onclick="setActiveView('subjects')">
                        <i class="fas fa-book"></i>
                        <span>Subjects</span>
                    </button>
                    <button class="tab-btn ${activeView === 'progress' ? 'active' : ''}" onclick="setActiveView('progress')">
                        <i class="fas fa-chart-line"></i>
                        <span>Progress</span>
                    </button>
                    <button class="tab-btn ${activeView === 'library' ? 'active' : ''}" onclick="setActiveView('library')">
                        <i class="fas fa-video"></i>
                        <span>Library</span>
                    </button>
                </div>
            `;
        }

        // Utility Functions
        function setActiveView(view) {
            activeView = view;
            showSidebar = false;
            renderDashboard();
        }

        function selectGrade(grade) {
            selectedGrade = grade;
            if (currentUser.role === 'student') {
                currentUser.grade = grade;
                localStorage.setItem('edunova_user', JSON.stringify(currentUser));
            }
            renderDashboard();
        }

        function selectAnswer(qIndex, oIndex) {
            assessmentAnswers[qIndex] = oIndex;
            renderDashboard();
        }

        function submitAssessment() {
            const assessment = database.assessments.grade1;
            const score = assessmentAnswers.filter((ans, idx) => 
                ans === assessment[idx].correct
            ).length;
            
            const percentage = (score / assessment.length) * 100;
            const determinedGrade = percentage >= 70 ? "Grade 2" : "Grade 1";
            
            currentUser.grade = determinedGrade;
            currentUser.hasTakenAssessment = true;
            selectedGrade = determinedGrade;
            localStorage.setItem('edunova_user', JSON.stringify(currentUser));
            
            showAssessment = false;
            activeView = "subjects";
            
            showToast(`Assessment completed! Score: ${score}/${assessment.length}. Placed in ${determinedGrade}.`, "success");
            renderDashboard();
        }

        function selectNigerianLanguage(language) {
            const subjects = database.subjects.grade1;
            const langSubject = subjects.find(s => s.name === "Nigerian Languages");
            if (langSubject) {
                langSubject.selectedLanguage = language;
                saveDatabase();
            }
            showLanguageSelect = false;
            showToast(`You've selected to learn ${language}! Let's begin.`, "success");
            
            // Start the first lesson
            setTimeout(() => startSubjectLearning(langSubject.id), 1000);
        }

        function toggleSidebar() {
            showSidebar = !showSidebar;
            renderDashboard();
        }

        function handleLogout() {
            currentUser = null;
            localStorage.removeItem('edunova_user');
            isLogin = true;
            activeView = "dashboard";
            showSidebar = false;
            showToast("Logged out successfully", "info");
            initApp();
        }

        // Initialize the app
        initApp();
    </script>
</body>
</html>
